# goit-algo2-hw-03

Домашнє завдання до тем «Графи та дерева»

## Завдання 1: Застосування алгоритму максимального потоку для логістики товарів

_Реалізація знаходиться в папці `task1`._

- Реалізація алгоритму Едмондса-Карпа для моделювання логістичної мережі з терміналів через склади до магазинів.
- Побудова графа з 20 вершинами та заданими пропускними здатностями.
- Розрахунок максимального потоку та вивід потоків по кожному шляху.

## Завдання 2: Порівняння ефективності OOBTree vs dict для діапазонних запитів

Реалізуйте в папці `task2`:

1. Функції:
   - `load_items(csv_path: str) -> List[Dict]` — завантажує дані з CSV-файлу.
   - `add_item_to_tree(tree: OOBTree, item: Dict) -> None`
   - `add_item_to_dict(dct: Dict, item: Dict) -> None`
   - `range_query_tree(tree: OOBTree, min_price: float, max_price: float) -> List[Dict]`
   - `range_query_dict(dct: Dict[float, List[Dict]], min_price: float, max_price: float) -> List[Dict]`
2. Будування двох структур:
   - `OOBTree` із BTrees — ключ: `Price`, значення: список товарів з такою ціною.
   - `dict` — аналогічна мапа.
3. Виконання 100 діапазонних запитів із вимірюванням часу через `timeit`.
4. Вивід загального часу виконання 100 запитів для **OOBTree** та **dict**.

### Генерація мокових CSV-даних для завдання 2

Для швидкого тестування можна створити файл `mock_data.csv` з випадковими товарами, наприклад у PowerShell:
```powershell
1..1000 | ForEach-Object {
  [PSCustomObject]@{
    ID       = "ID$_"
    Name     = "Name$_"
    Category = "Category$((Get-Random -Minimum 1 -Maximum 5))"
    Price    = Get-Random -Minimum 1 -Maximum 1000
  }
} | Export-Csv -Path mock_data.csv -NoTypeInformation
```

### Пояснення алгоритмів

#### 1) Edmonds–Karp (Завдання 1)
- Використовує BFS для пошуку найкоротшого (за кількістю ребер) шляху в залишковій мережі.
- На кожному кроці визначає «буттлнек» — мінімальну пропускну здатність уздовж знайденого шляху.
- Зменшує пропускні здатності уздовж шляху (та збільшує в зворотному напрямку).
- Повторює, доки є шлях з ненульовою пропускною здатністю.
- Часова складність O(V * E^2).

#### 2) OOBTree vs dict Range Queries (Завдання 2)
- OOBTree: зберігає ключі у впорядкованому вигляді; діапазонний запит `items(min, max)` обробляється у O(log n + k), де k — кількість знайдених елементів.
- dict: стандартний словник без індексів; діапазонний запит перебирає всі ключі за O(n).

## Візуалізація мережі (опціонально)

Для графічного зображення логістичної мережі та результатів максимального потоку використовуються бібліотеки `networkx` та `matplotlib`. Візуалізація показує:

- **Вузли**:
  - `source` (джерело) — фіолетовий
  - `T1`, `T2` (термінали) — синій
  - `S1`–`S4` (склади) — помаранчевий
  - `M1`–`M14` (магазини) — зелений
  - `sink` (стік) — золотий
- **Ребра**:
  - чорні суцільні лінії — потік менший за пропускну здатність
  - червоні суцільні лінії — потік дорівнює пропускній здатності (вузькі місця)
  - сірі пунктирні лінії — потік = 0 (невикористані шляхи)
- **Підписи ребер** відображають формат `потік/пропускна здатність`.
- Розташування вершин відбувається за шарами: `source` → `T` → `S` → `M` → `sink`.
  
**До візуалізації додаються:**  
- Підсвічування _найкоротшого_ (за кількістю ребер) шляху від `source` до `sink` фіолетовим кольором.  
- Визначення та відображення «буттлнеку» — мінімальної пропускної здатності вздовж цього шляху червоним кольором (відображається у підписах ребер `потік/пропускна здатність`).

Повний код для побудови та налаштування візуалізації знаходиться у `task1/solution.py`. Встановіть залежності:

```bash
pip install networkx matplotlib
```

### Використання

```bash
# Переконайтесь, що встановлені залежності:
pip install BTrees

# Запуск демонстрації:
cd goit-algo2-hw-03/task2
python solution.py mock_data.csv
```
